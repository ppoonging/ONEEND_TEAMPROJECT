<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
<button onclick="getWeather('Seoul')">ì„œìš¸ ë‚ ì”¨ ê°€ì ¸ì˜¤ê¸°</button>
<button onclick="getWeather('Incheon')">ì¸ì²œ ë‚ ì”¨ ê°€ì ¸ì˜¤ê¸°</button>
<button onclick="getWeather('Busan')">ë¶€ì‚° ë‚ ì”¨ ê°€ì ¸ì˜¤ê¸°</button>

<!-- ğŸŒ¤ï¸ ë‚ ì”¨ ì¹´ë“œ UI -->

<div class="weather-card-container">
    <div class="weather-card" id="weatherCard" style="display: none;">
        <p class="weather-city" id="weatherCity">ë„ì‹œëª…</p>
        <p class="weather-summary" id="weatherSummary">ë‚ ì”¨ ì„¤ëª…</p>
        <img id="weatherIcon" class="weather-icon" src="" alt="ë‚ ì”¨ ì•„ì´ì½˜">
        <p class="weather-temp" id="weatherTemp">ì˜¨ë„</p>
        <div class="weather-details">
            <p> ë‚ ì§œ : <span id="weatherDate"></span></p>
            <p> ìŠµë„ : <span id="weatherHumidity"></span></p>
        </div>
    </div>
</div>

<link rel="stylesheet" type="text/css" href="/css/weather.css">

<script>
    function getWeather(city) {
        console.log(`Fetching weather for ${city}...`);

        $.ajax({
            url: `/weather?location=${city}`,
            method: 'GET',
            dataType: 'json',
            success: function (data) {
                console.log("Received weather data:", data); // JSON ë°ì´í„° ì½˜ì†” í™•ì¸

                if (data.error) {
                    showError(data.error);
                    return;
                }

                // âœ… JSONì„ UI ìš”ì†Œì— ë°˜ì˜í•˜ê¸°
                $("#weatherCity").text(data.location); // ë„ì‹œ ì´ë¦„
                $("#weatherSummary").text(data.weatherData.weather[0].description); // ë‚ ì”¨ ì„¤ëª…
                $("#weatherIcon").attr("src", data.weatherIcon); // ë‚ ì”¨ ì•„ì´ì½˜
                $("#weatherTemp").text(data.weatherData.main.temp + ' Â°C'); // ì˜¨ë„
                $("#weatherHumidity").text(data.weatherData.main.humidity + ' %'); // ìŠµë„
                $("#weatherDate").text(data.today); // ë‚ ì§œ

                // âœ… ë‚ ì”¨ ì¹´ë“œ í‘œì‹œ
                $("#weatherCard").show();
                $("#error-message").hide();
            },
            error: function (xhr, status, error) {
                console.error("Error fetching weather:", error);
                showError("ë‚ ì”¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            }
        });
    }

</script>
</body>

